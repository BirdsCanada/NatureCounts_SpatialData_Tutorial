---
title: "07-RasterSummaryStats"
author: "Dimitrios Markou"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Chapter 7: Raster Summary Statistics

##### Author: Dimitrios Markou

In Chapter 6, you downloaded satellite imagery from the Copernicus SENTINEL-2 mission and calculated spectral indices (NDWI, NDVI) over [La Mauricie National Park](https://parks.canada.ca/pn-np/qc/mauricie/nature) to combine with NatureCounts data from the [Quebec Breeding Bird Atlas (2010 - 2014)](https://naturecounts.ca/nc/default/datasets.jsp?code=QCATLAS2PC&sec=bmdr). In this tutorial, you will calculate raster summary statistics and explore ways to visualize them.

**To proceed with this tutorial, you must complete sections 4.1 - 4.3 of [Chapter 4: Elevation Data](04-ElevationData.Rmd). They help you create and save a masked raster file which is required for this lesson. To make this faster, we have provided the outputs to section 4.1 in the [data folder](https://github.com/BirdsCanada/NatureCounts_SpatialData_Tutorial/tree/d83eed714373048c8f9fdb4ea4a17f1fd4bef3f7/Data) from the [NatureCounts_SpatialData_Tutorial](https://github.com/BirdsCanada/NatureCounts_SpatialData_Tutorial.git) repository.**

# 7.0 Learning Objectives

By the end of **Chapter 7 - Raster Summary Statistics**, users will know how to:

-   Calculate summary statistics using base and custom functions

-   Visualize raster summary data

# 7.1 Calculate Raster Summary Statistics

To calculate the summary statistics for the values of individual SpatRaster layers you can use the `global()` function like so:

```{r}
global(mauricie_mask, fun = "mean", na.rm = TRUE)
```

It is also possible to make and implement a function to calculate multiple summary statistics simultaneously. For example, `my_summary_stats` calculates the max, min, mean and sd of an input numeric vector `x` and returns the summary statistics in a vector (give this a few minutes):

```{r}
my_summary_stats <- function(x) {
  out <- c(mean = mean(x, na.rm = TRUE), 
              sd = sd(x, na.rm = TRUE), 
              min = min(x, na.rm = TRUE), 
              max = max(x, na.rm = TRUE))
  return(out)
}
global(mauricie_mask, fun = my_summary_stats)
```

You can also create a histogram of the raster DTM data.

```{r, warning = FALSE}
terra::hist(mauricie_mask, axes = TRUE, 
            main = "Elevation values within La Mauricie National Park",
            xlab = "Elevation (m)",
            col = "Green")
```
